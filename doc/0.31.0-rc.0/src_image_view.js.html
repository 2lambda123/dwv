<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: src/image/view.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="",baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><style>ul{list-style-type:disc!important}ul ul{list-style-type:circle!important}</style><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body class="dark" data-theme="dark"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">DWV doc</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="gMKB9jkVlMTZFjQFvZ078"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-architecture.html">architecture</a></div><div class="sidebar-section-children"><a href="tutorial-conformance.html">conformance</a></div><div class="sidebar-section-children"><a href="tutorial-developing.html">developing</a></div><div class="sidebar-section-children"><a href="tutorial-errors.html">errors</a></div><div class="sidebar-section-children"><a href="tutorial-examples.html">examples</a></div><div class="sidebar-section-children"><a href="tutorial-integrations.html">integrations</a></div><div class="sidebar-section-children"><a href="tutorial-module.html">module</a></div><div class="sidebar-section-children"><a href="tutorial-standards.html">standards</a></div><div class="sidebar-section-children"><a href="tutorial-user-stories.html">user-stories</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="XMnq3KWHu5us0GuiC_tcf"><div>Namespaces</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="dwv.html">dwv</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.html">ctrl</a></div><div class="sidebar-section-children"><a href="dwv.dicom.html">dicom</a></div><div class="sidebar-section-children"><a href="dwv.env.html">env</a></div><div class="sidebar-section-children"><a href="dwv.gui.html">gui</a></div><div class="sidebar-section-children"><a href="dwv.image.html">image</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.html">filter</a></div><div class="sidebar-section-children"><a href="dwv.image.lut.html">lut</a></div><div class="sidebar-section-children"><a href="dwv.io.html">io</a></div><div class="sidebar-section-children"><a href="dwv.math.html">math</a></div><div class="sidebar-section-children"><a href="dwv.test.html">test</a></div><div class="sidebar-section-children"><a href="dwv.tool.html">tool</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw_.html">draw</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter_.html">filter</a></div><div class="sidebar-section-children"><a href="dwv.utils.html">utils</a></div><div class="sidebar-section-children"><a href="dwv.utils.logger.html">logger</a></div><div class="sidebar-section-children"><a href="dwv.utils.logger.console.html">console</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="XB1UeGrgiPqtbCK7EE0_T"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="dwv.App.html#event:keydown">keydown</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:load">load</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadabort">loadabort</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loaderror">loaderror</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loaditem">loaditem</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadprogress">loadprogress</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadstart">loadstart</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:opacitychange">opacitychange</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:renderend">renderend</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:renderstart">renderstart</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.LayerGroup.html#event:offsetchange">offsetchange</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.LayerGroup.html#event:zoomchange">zoomchange</a></div><div class="sidebar-section-children"><a href="dwv.image.DeleteSegmentCommand.html#event:masksegmentdelete">masksegmentdelete</a></div><div class="sidebar-section-children"><a href="dwv.image.DeleteSegmentCommand.html#event:masksegmentredraw">masksegmentredraw</a></div><div class="sidebar-section-children"><a href="dwv.image.Image.html#event:imagechange">imagechange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:alphafuncchange">alphafuncchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:colourchange">colourchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:positionchange">positionchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:wlchange">wlchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:wlpresetadd">wlpresetadd</a></div><div class="sidebar-section-children"><a href="dwv.tool.ChangeGroupCommand.html#event:drawchange">drawchange</a></div><div class="sidebar-section-children"><a href="dwv.tool.DeleteGroupCommand.html#event:drawdelete">drawdelete</a></div><div class="sidebar-section-children"><a href="dwv.tool.DrawGroupCommand.html#event:drawcreate">drawcreate</a></div><div class="sidebar-section-children"><a href="dwv.tool.MoveGroupCommand.html#event:drawmove">drawmove</a></div><div class="sidebar-section-children"><a href="dwv.tool.RunFilterCommand.html#event:filterrun">filterrun</a></div><div class="sidebar-section-children"><a href="dwv.tool.RunFilterCommand.html#event:filterundo">filterundo</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html#event:redo">redo</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html#event:undo">undo</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html#event:undoadd">undoadd</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="nYE11oplZw5EksiXPDNlq"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="FilePixGenerator.html">FilePixGenerator</a></div><div class="sidebar-section-children"><a href="GradSquarePixGenerator.html">GradSquarePixGenerator</a></div><div class="sidebar-section-children"><a href="MPRPixGenerator.html">MPRPixGenerator</a></div><div class="sidebar-section-children"><a href="dcmb.utils.ListenerHandler.html">ListenerHandler</a></div><div class="sidebar-section-children"><a href="dwv.App.html">App</a></div><div class="sidebar-section-children"><a href="dwv.ModernizrInit-ModernizrProto.html">ModernizrProto</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.DrawController.html">DrawController</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.LoadController.html">LoadController</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.ToolboxController.html">ToolboxController</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.ViewController.html">ViewController</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DataReader.html">DataReader</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DataWriter.html">DataWriter</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DicomElementsWrapper.html">DicomElementsWrapper</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DicomParser.html">DicomParser</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DicomWriter.html">DicomWriter</a></div><div class="sidebar-section-children"><a href="dwv.dicom.Tag.html">Tag</a></div><div class="sidebar-section-children"><a href="dwv.gui.DrawLayer.html">DrawLayer</a></div><div class="sidebar-section-children"><a href="dwv.gui.LayerGroup.html">LayerGroup</a></div><div class="sidebar-section-children"><a href="dwv.gui.Stage.html">Stage</a></div><div class="sidebar-section-children"><a href="dwv.gui.Style.html">Style</a></div><div class="sidebar-section-children"><a href="dwv.gui.ViewLayer.html">ViewLayer</a></div><div class="sidebar-section-children"><a href="dwv.image.AsynchPixelBufferDecoder.html">AsynchPixelBufferDecoder</a></div><div class="sidebar-section-children"><a href="dwv.image.DeleteSegmentCommand.html">DeleteSegmentCommand</a></div><div class="sidebar-section-children"><a href="dwv.image.DicomBufferToView.html">DicomBufferToView</a></div><div class="sidebar-section-children"><a href="dwv.image.Geometry.html">Geometry</a></div><div class="sidebar-section-children"><a href="dwv.image.Image.html">Image</a></div><div class="sidebar-section-children"><a href="dwv.image.ImageFactory.html">ImageFactory</a></div><div class="sidebar-section-children"><a href="dwv.image.MaskFactory.html">MaskFactory</a></div><div class="sidebar-section-children"><a href="dwv.image.MaskSegmentHelper.html">MaskSegmentHelper</a></div><div class="sidebar-section-children"><a href="dwv.image.PixelBufferDecoder.html">PixelBufferDecoder</a></div><div class="sidebar-section-children"><a href="dwv.image.PlaneHelper.html">PlaneHelper</a></div><div class="sidebar-section-children"><a href="dwv.image.RescaleLut.html">RescaleLut</a></div><div class="sidebar-section-children"><a href="dwv.image.RescaleSlopeAndIntercept.html">RescaleSlopeAndIntercept</a></div><div class="sidebar-section-children"><a href="dwv.image.Size.html">Size</a></div><div class="sidebar-section-children"><a href="dwv.image.Spacing.html">Spacing</a></div><div class="sidebar-section-children"><a href="dwv.image.SynchPixelBufferDecoder.html">SynchPixelBufferDecoder</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html">View</a></div><div class="sidebar-section-children"><a href="dwv.image.ViewFactory.html">ViewFactory</a></div><div class="sidebar-section-children"><a href="dwv.image.WindowLevel.html">WindowLevel</a></div><div class="sidebar-section-children"><a href="dwv.image.WindowLut.html">WindowLut</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.Sharpen.html">Sharpen</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.Sobel.html">Sobel</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.Threshold.html">Threshold</a></div><div class="sidebar-section-children"><a href="dwv.io.DicomDataLoader.html">DicomDataLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.FilesLoader.html">FilesLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.JSONTextLoader.html">JSONTextLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.MemoryLoader.html">MemoryLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.MultipartLoader.html">MultipartLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.RawImageLoader.html">RawImageLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.RawVideoLoader.html">RawVideoLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.State.html">State</a></div><div class="sidebar-section-children"><a href="dwv.io.UrlsLoader.html">UrlsLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.ZipLoader.html">ZipLoader</a></div><div class="sidebar-section-children"><a href="dwv.math.BucketQueue.html">BucketQueue</a></div><div class="sidebar-section-children"><a href="dwv.math.Circle.html">Circle</a></div><div class="sidebar-section-children"><a href="dwv.math.Ellipse.html">Ellipse</a></div><div class="sidebar-section-children"><a href="dwv.math.Index.html">Index</a></div><div class="sidebar-section-children"><a href="dwv.math.Line.html">Line</a></div><div class="sidebar-section-children"><a href="dwv.math.Matrix33.html">Matrix33</a></div><div class="sidebar-section-children"><a href="dwv.math.Path.html">Path</a></div><div class="sidebar-section-children"><a href="dwv.math.Point.html">Point</a></div><div class="sidebar-section-children"><a href="dwv.math.Point2D.html">Point2D</a></div><div class="sidebar-section-children"><a href="dwv.math.Point3D.html">Point3D</a></div><div class="sidebar-section-children"><a href="dwv.math.ROI.html">ROI</a></div><div class="sidebar-section-children"><a href="dwv.math.Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="dwv.math.Scissors.html">Scissors</a></div><div class="sidebar-section-children"><a href="dwv.math.SimpleStats.html">SimpleStats</a></div><div class="sidebar-section-children"><a href="dwv.math.Vector3D.html">Vector3D</a></div><div class="sidebar-section-children"><a href="dwv.tool.ChangeGroupCommand.html">ChangeGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.DeleteGroupCommand.html">DeleteGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Draw.html">Draw</a></div><div class="sidebar-section-children"><a href="dwv.tool.DrawGroupCommand.html">DrawGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Filter.html">Filter</a></div><div class="sidebar-section-children"><a href="dwv.tool.Floodfill.html">Floodfill</a></div><div class="sidebar-section-children"><a href="dwv.tool.Livewire.html">Livewire</a></div><div class="sidebar-section-children"><a href="dwv.tool.MoveGroupCommand.html">MoveGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Opacity.html">Opacity</a></div><div class="sidebar-section-children"><a href="dwv.tool.RunFilterCommand.html">RunFilterCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Scroll.html">Scroll</a></div><div class="sidebar-section-children"><a href="dwv.tool.ScrollWheel.html">ScrollWheel</a></div><div class="sidebar-section-children"><a href="dwv.tool.ShapeEditor.html">ShapeEditor</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html">UndoStack</a></div><div class="sidebar-section-children"><a href="dwv.tool.WindowLevel.html">WindowLevel</a></div><div class="sidebar-section-children"><a href="dwv.tool.ZoomAndPan.html">ZoomAndPan</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.ArrowFactory.html">ArrowFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.CircleFactory.html">CircleFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.EllipseFactory.html">EllipseFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.FreeHandFactory.html">FreeHandFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.ProtractorFactory.html">ProtractorFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.RectangleFactory.html">RectangleFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.RoiFactory.html">RoiFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.RulerFactory.html">RulerFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter.Sharpen.html">Sharpen</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter.Sobel.html">Sobel</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter.Threshold.html">Threshold</a></div><div class="sidebar-section-children"><a href="dwv.utils.ListenerHandler.html">ListenerHandler</a></div><div class="sidebar-section-children"><a href="dwv.utils.ThreadPool.html">ThreadPool</a></div><div class="sidebar-section-children"><a href="dwv.utils.WorkerTask.html">WorkerTask</a></div><div class="sidebar-section-children"><a href="dwv.utils.WorkerThread.html">WorkerThread</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="gCSpF9Amf-JCfSNz7Y70c"><div>Externals</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="external-FileReader.html">FileReader</a></div><div class="sidebar-section-children"><a href="external-JSZip.html">JSZip</a></div><div class="sidebar-section-children"><a href="external-JpegImage.html">JpegImage</a></div><div class="sidebar-section-children"><a href="external-JpxImage.html">JpxImage</a></div><div class="sidebar-section-children"><a href="external-JpxImage.html">JpxImage</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-MagicWand.html">MagicWand</a></div><div class="sidebar-section-children"><a href="external-TextDecoder.html">TextDecoder</a></div><div class="sidebar-section-children"><a href="external-TextEncoder.html">TextEncoder</a></div><div class="sidebar-section-children"><a href="external-Worker.html">Worker</a></div><div class="sidebar-section-children"><a href="external-XMLHttpRequest.html">XMLHttpRequest</a></div><div class="sidebar-section-children"><a href="external-XMLHttpRequest.html">XMLHttpRequest</a></div><div class="sidebar-section-children"><a href="external-i18next.html">i18next</a></div><div class="sidebar-section-children"><a href="external-i18nextBrowserLanguageDetector.html">i18nextBrowserLanguageDetector</a></div><div class="sidebar-section-children"><a href="external-i18nextHttpBackend.html">i18nextHttpBackend</a></div><div class="sidebar-section-children"><a href="external-jpeg.html">jpeg</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="dIx1EF6rW_YdnipjQW6PA"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-tests_dicom.html">tests/dicom</a></div><div class="sidebar-section-children"><a href="module-tests_gui.html">tests/gui</a></div><div class="sidebar-section-children"><a href="module-tests_image.html">tests/image</a></div><div class="sidebar-section-children"><a href="module-tests_io.html">tests/io</a></div><div class="sidebar-section-children"><a href="module-tests_math.html">tests/math</a></div><div class="sidebar-section-children"><a href="module-tests_math.html">tests/math</a></div><div class="sidebar-section-children"><a href="module-tests_state.html">tests/state</a></div><div class="sidebar-section-children"><a href="module-tests_utils.html">tests/utils</a></div><div class="sidebar-section-children"><a href="module-tests_utils.html">tests/utils</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"><div class="navbar-item"><a id="" href="https://github.com/ivmartel/dwv" target="_blank">github</a></div><div class="navbar-item"><a id="" href="https://www.npmjs.com/package/dwv" target="_blank">npm</a></div></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">src_image_view.js</h1></header><article><pre class="prettyprint source lang-js"><code>// namespaces
var dwv = dwv || {};
dwv.image = dwv.image || {};

/**
 * List of view event names.
 *
 * @type {Array}
 */
dwv.image.viewEventNames = [
  'wlchange',
  'wlpresetadd',
  'colourchange',
  'positionchange',
  'opacitychange',
  'alphafuncchange'
];

/**
 * View class.
 *
 * @class
 * @param {Image} image The associated image.
 * Need to set the window lookup table once created
 * (either directly or with helper methods).
 */
dwv.image.View = function (image) {
  // closure to self
  var self = this;

  // listen to appendframe event to update the current position
  //   to add the extra dimension
  image.addEventListener('appendframe', function () {
    // update current position if first appendFrame
    var index = self.getCurrentIndex();
    if (index.length() === 3) {
      // add dimension
      var values = index.getValues();
      values.push(0);
      self.setCurrentIndex(new dwv.math.Index(values));
    }
  });

  /**
   * Window lookup tables, indexed per Rescale Slope and Intercept (RSI).
   *
   * @private
   * @type {Window}
   */
  var windowLuts = {};

  /**
   * Window presets.
   * Minmax will be filled at first use (see view.setWindowLevelPreset).
   *
   * @private
   * @type {object}
   */
  var windowPresets = {minmax: {name: 'minmax'}};

  /**
   * Current window preset name.
   *
   * @private
   * @type {string}
   */
  var currentPresetName = null;

  /**
   * Current window level.
   *
   * @private
   * @type {object}
   */
  var currentWl = null;

  /**
   * colour map.
   *
   * @private
   * @type {object}
   */
  var colourMap = dwv.image.lut.plain;
  /**
   * Current position as a Point3D.
   * Store position and not index to stay geometry independent.
   *
   * @private
   * @type {dwv.math.Point3D}
   */
  var currentPosition = null;
  /**
   * View orientation. Undefined will use the original slice ordering.
   *
   * @private
   * @type {object}
   */
  var orientation;

  /**
   * Listener handler.
   *
   * @type {object}
   * @private
   */
  var listenerHandler = new dwv.utils.ListenerHandler();

  /**
   * Get the associated image.
   *
   * @returns {Image} The associated image.
   */
  this.getImage = function () {
    return image;
  };
  /**
   * Set the associated image.
   *
   * @param {Image} inImage The associated image.
   */
  this.setImage = function (inImage) {
    image = inImage;
  };

  /**
   * Get the view orientation.
   *
   * @returns {dwv.math.Matrix33} The orientation matrix.
   */
  this.getOrientation = function () {
    return orientation;
  };

  /**
   * Set the view orientation.
   *
   * @param {dwv.math.Matrix33} mat33 The orientation matrix.
   */
  this.setOrientation = function (mat33) {
    orientation = mat33;
  };

  /**
   * Initialise the view: set initial index.
   */
  this.init = function () {
    this.setInitialIndex();
  };

  /**
   * Set the initial index to 0.
   */
  this.setInitialIndex = function () {
    var geometry = image.getGeometry();
    var size = geometry.getSize();
    var values = new Array(size.length());
    values.fill(0);
    // middle
    values[0] = Math.floor(size.get(0) / 2);
    values[1] = Math.floor(size.get(1) / 2);
    values[2] = Math.floor(size.get(2) / 2);
    this.setCurrentIndex(new dwv.math.Index(values), true);
  };

  /**
   * Get the milliseconds per frame from frame rate.
   *
   * @param {number} recommendedDisplayFrameRate Recommended Display Frame Rate.
   * @returns {number} The milliseconds per frame.
   */
  this.getPlaybackMilliseconds = function (recommendedDisplayFrameRate) {
    if (!recommendedDisplayFrameRate) {
      // Default to 10 FPS if none is found in the meta
      recommendedDisplayFrameRate = 10;
    }
    // round milliseconds per frame to nearest whole number
    return Math.round(1000 / recommendedDisplayFrameRate);
  };

  /**
   * Per value alpha function.
   *
   * @param {*} _value The pixel value. Can be a number for monochrome
   *  data or an array for RGB data.
   * @param {number} _index The data index of the value.
   * @returns {number} The coresponding alpha [0,255].
   */
  var alphaFunction = function (_value, _index) {
    // default always returns fully visible
    return 0xff;
  };

  /**
   * Get the alpha function.
   *
   * @returns {Function} The function.
   */
  this.getAlphaFunction = function () {
    return alphaFunction;
  };

  /**
   * Set alpha function.
   *
   * @param {Function} func The function.
   * @fires dwv.image.View#alphafuncchange
   */
  this.setAlphaFunction = function (func) {
    alphaFunction = func;
    /**
     * Alpha func change event.
     *
     * @event dwv.image.View#alphafuncchange
     * @type {object}
     */
    fireEvent({
      type: 'alphafuncchange'
    });
  };

  /**
   * Get the window LUT of the image.
   * Warning: can be undefined in no window/level was set.
   *
   * @param {object} rsi Optional image rsi, will take the one of the
   *   current slice otherwise.
   * @returns {Window} The window LUT of the image.
   * @fires dwv.image.View#wlchange
   */
  this.getCurrentWindowLut = function (rsi) {
    // check position
    if (!this.getCurrentIndex()) {
      this.setInitialIndex();
    }
    var currentIndex = this.getCurrentIndex();
    // use current rsi if not provided
    if (typeof rsi === 'undefined') {
      rsi = image.getRescaleSlopeAndIntercept(currentIndex);
    }

    // get the current window level
    var wl = null;
    // special case for 'perslice' presets
    if (currentPresetName &amp;&amp;
      typeof windowPresets[currentPresetName] !== 'undefined' &amp;&amp;
      typeof windowPresets[currentPresetName].perslice !== 'undefined' &amp;&amp;
      windowPresets[currentPresetName].perslice === true) {
      // get the preset for this slice
      var offset = image.getSecondaryOffset(currentIndex);
      wl = windowPresets[currentPresetName].wl[offset];
    }
    // regular case
    if (!wl) {
      // if no current, use first id
      if (!currentWl) {
        this.setWindowLevelPresetById(0, true);
      }
      wl = currentWl;
    }

    // get the window lut
    var wlut = windowLuts[rsi.toString()];
    if (typeof wlut === 'undefined') {
      // create the rescale lookup table
      var rescaleLut = new dwv.image.RescaleLut(
        image.getRescaleSlopeAndIntercept(0), image.getMeta().BitsStored);
      // create the window lookup table
      var windowLut = new dwv.image.WindowLut(
        rescaleLut, image.getMeta().IsSigned);
      // store
      this.addWindowLut(windowLut);
      wlut = windowLut;
    }

    // update lut window level if not present or different from previous
    var lutWl = wlut.getWindowLevel();
    if (!wl.equals(lutWl)) {
      // set lut window level
      wlut.setWindowLevel(wl);
      wlut.update();
      // fire change event
      if (!lutWl ||
        lutWl.getWidth() !== wl.getWidth() ||
        lutWl.getCenter() !== wl.getCenter()) {
        fireEvent({
          type: 'wlchange',
          value: [wl.getCenter(), wl.getWidth()],
          wc: wl.getCenter(),
          ww: wl.getWidth(),
          skipGenerate: true
        });
      }
    }

    // return
    return wlut;
  };
  /**
   * Add the window LUT to the list.
   *
   * @param {Window} wlut The window LUT of the image.
   */
  this.addWindowLut = function (wlut) {
    var rsi = wlut.getRescaleLut().getRSI();
    windowLuts[rsi.toString()] = wlut;
  };

  /**
   * Get the window presets.
   *
   * @returns {object} The window presets.
   */
  this.getWindowPresets = function () {
    return windowPresets;
  };

  /**
   * Get the window presets names.
   *
   * @returns {object} The list of window presets names.
   */
  this.getWindowPresetsNames = function () {
    return Object.keys(windowPresets);
  };

  /**
   * Set the window presets.
   *
   * @param {object} presets The window presets.
   */
  this.setWindowPresets = function (presets) {
    windowPresets = presets;
  };

  /**
   * Set the default colour map.
   *
   * @param {object} map The colour map.
   */
  this.setDefaultColourMap = function (map) {
    colourMap = map;
  };

  /**
   * Add window presets to the existing ones.
   *
   * @param {object} presets The window presets.
   */
  this.addWindowPresets = function (presets) {
    var keys = Object.keys(presets);
    var key = null;
    for (var i = 0; i &lt; keys.length; ++i) {
      key = keys[i];
      if (typeof windowPresets[key] !== 'undefined') {
        if (typeof windowPresets[key].perslice !== 'undefined' &amp;&amp;
          windowPresets[key].perslice === true) {
          throw new Error('Cannot add perslice preset');
        } else {
          windowPresets[key] = presets[key];
        }
      } else {
        // add new
        windowPresets[key] = presets[key];
        // fire event
        /**
         * Window/level add preset event.
         *
         * @event dwv.image.View#wlpresetadd
         * @type {object}
         * @property {string} name The name of the preset.
         */
        fireEvent({
          type: 'wlpresetadd',
          name: key
        });
      }
    }
  };

  /**
   * Get the colour map of the image.
   *
   * @returns {object} The colour map of the image.
   */
  this.getColourMap = function () {
    return colourMap;
  };
  /**
   * Set the colour map of the image.
   *
   * @param {object} map The colour map of the image.
   * @fires dwv.image.View#colourchange
   */
  this.setColourMap = function (map) {
    colourMap = map;
    /**
     * Color change event.
     *
     * @event dwv.image.View#colourchange
     * @type {object}
     * @property {Array} value The changed value.
     * @property {number} wc The new window center value.
     * @property {number} ww The new window wdth value.
     */
    fireEvent({
      type: 'colourchange',
      wc: this.getCurrentWindowLut().getWindowLevel().getCenter(),
      ww: this.getCurrentWindowLut().getWindowLevel().getWidth()
    });
  };

  /**
   * Get the current position.
   *
   * @returns {dwv.math.Point} The current position.
   */
  this.getCurrentPosition = function () {
    return currentPosition;
  };

  /**
   * Get the current index.
   *
   * @returns {dwv.math.Index} The current index.
   */
  this.getCurrentIndex = function () {
    var position = this.getCurrentPosition();
    if (!position) {
      return null;
    }
    var geometry = this.getImage().getGeometry();
    return geometry.worldToIndex(position);
  };

  /**
   * Check is the provided position can be set.
   *
   * @param {dwv.math.Point} position The position.
   * @returns {boolean} True is the position is in bounds.
   */
  this.canSetPosition = function (position) {
    var geometry = image.getGeometry();
    var index = geometry.worldToIndex(position);
    var dirs = [this.getScrollIndex()];
    if (index.length() === 4) {
      dirs.push(3);
    }
    return geometry.isIndexInBounds(index, dirs);
  };

  /**
   * Get the origin at a given position.
   *
   * @param {dwv.math.Point} position The position.
   * @returns {dwv.math.Point} The origin.
   */
  this.getOrigin = function (position) {
    var geometry = image.getGeometry();
    var originIndex = 0;
    if (typeof position !== 'undefined') {
      var index = geometry.worldToIndex(position);
      // index is reoriented, 2 is scroll index
      originIndex = index.get(2);
    }
    return geometry.getOrigins()[originIndex];
  };

  /**
   * Set the current position.
   *
   * @param {dwv.math.Point} position The new position.
   * @param {boolean} silent Flag to fire event or not.
   * @returns {boolean} False if not in bounds
   * @fires dwv.image.View#positionchange
   */
  this.setCurrentPosition = function (position, silent) {
    // send invalid event if not in bounds
    var geometry = image.getGeometry();
    var index = geometry.worldToIndex(position);
    var dirs = [this.getScrollIndex()];
    if (index.length() === 4) {
      dirs.push(3);
    }
    if (!geometry.isIndexInBounds(index, dirs)) {
      if (!silent) {
        // fire event with valid: false
        fireEvent({
          type: 'positionchange',
          value: [
            index.getValues(),
            position.getValues(),
          ],
          valid: false
        });
      }
      return false;
    }
    return this.setCurrentIndex(index, silent);
  };

  /**
   * Set the current index.
   *
   * @param {dwv.math.Index} index The new index.
   * @param {boolean} silent Flag to fire event or not.
   * @returns {boolean} False if not in bounds.
   * @fires dwv.image.View#positionchange
   */
  this.setCurrentIndex = function (index, silent) {
    // check input
    if (typeof silent === 'undefined') {
      silent = false;
    }

    var geometry = image.getGeometry();
    var position = geometry.indexToWorld(index);

    // check if possible
    var dirs = [this.getScrollIndex()];
    if (index.length() === 4) {
      dirs.push(3);
    }
    if (!geometry.isIndexInBounds(index, dirs)) {
      // do no send invalid positionchange event: avoid empty repaint
      return false;
    }

    // calculate diff dims before updating internal
    var diffDims = null;
    var currentIndex = null;
    if (this.getCurrentPosition()) {
      currentIndex = this.getCurrentIndex();
    }
    if (currentIndex) {
      if (currentIndex.canCompare(index)) {
        diffDims = currentIndex.compare(index);
      } else {
        diffDims = [];
        var minLen = Math.min(currentIndex.length(), index.length());
        for (var i = 0; i &lt; minLen; ++i) {
          if (currentIndex.get(i) !== index.get(i)) {
            diffDims.push(i);
          }
        }
        var maxLen = Math.max(currentIndex.length(), index.length());
        for (var j = minLen; j &lt; maxLen; ++j) {
          diffDims.push(j);
        }
      }
    } else {
      diffDims = [];
      for (var k = 0; k &lt; index.length(); ++k) {
        diffDims.push(k);
      }
    }

    // assign
    currentPosition = position;

    if (!silent) {
      /**
       * Position change event.
       *
       * @event dwv.image.View#positionchange
       * @type {object}
       * @property {Array} value The changed value as [index, pixelValue].
       * @property {Array} diffDims An array of modified indices.
       */
      var posEvent = {
        type: 'positionchange',
        value: [
          index.getValues(),
          position.getValues(),
        ],
        diffDims: diffDims,
        data: {
          imageUid: image.getImageUid(index)
        }
      };

      // add value if possible
      if (image.canQuantify()) {
        var pixValue = image.getRescaledValueAtIndex(index);
        posEvent.value.push(pixValue);
      }

      // fire
      fireEvent(posEvent);
    }

    // all good
    return true;
  };

  /**
   * Set the view window/level.
   *
   * @param {number} center The window center.
   * @param {number} width The window width.
   * @param {string} name Associated preset name, defaults to 'manual'.
   * Warning: uses the latest set rescale LUT or the default linear one.
   * @param {boolean} silent Flag to launch events with skipGenerate.
   * @fires dwv.image.View#wlchange
   */
  this.setWindowLevel = function (center, width, name, silent) {
    // window width shall be >= 1 (see https://www.dabsoft.ch/dicom/3/C.11.2.1.2/)
    if (width &lt; 1) {
      return;
    }

    // check input
    if (typeof name === 'undefined') {
      name = 'manual';
    }
    if (typeof silent === 'undefined') {
      silent = false;
    }

    // new window level
    var newWl = new dwv.image.WindowLevel(center, width);

    // check if new
    var isNew = !newWl.equals(currentWl);

    // compare to previous if present
    if (isNew) {
      var isNewWidth = currentWl ? currentWl.getWidth() !== width : true;
      var isNewCenter = currentWl ? currentWl.getCenter() !== center : true;
      // assign
      currentWl = newWl;
      currentPresetName = name;

      if (isNewWidth || isNewCenter) {
        /**
         * Window/level change event.
         *
         * @event dwv.image.View#wlchange
         * @type {object}
         * @property {Array} value The changed value.
         * @property {number} wc The new window center value.
         * @property {number} ww The new window wdth value.
         * @property {boolean} skipGenerate Flag to skip view generation.
         */
        fireEvent({
          type: 'wlchange',
          value: [center, width],
          wc: center,
          ww: width,
          skipGenerate: silent
        });
      }
    }
  };

  /**
   * Set the window level to the preset with the input name.
   *
   * @param {string} name The name of the preset to activate.
   * @param {boolean} silent Flag to launch events with skipGenerate.
   */
  this.setWindowLevelPreset = function (name, silent) {
    var preset = this.getWindowPresets()[name];
    if (typeof preset === 'undefined') {
      throw new Error('Unknown window level preset: \'' + name + '\'');
    }
    // special min/max
    if (name === 'minmax' &amp;&amp; typeof preset.wl === 'undefined') {
      preset.wl = [this.getWindowLevelMinMax()];
    }
    // default to first
    var wl = preset.wl[0];
    // check if 'perslice' case
    if (typeof preset.perslice !== 'undefined' &amp;&amp;
      preset.perslice === true) {
      var offset = image.getSecondaryOffset(this.getCurrentIndex());
      wl = preset.wl[offset];
    }
    // set w/l
    this.setWindowLevel(
      wl.getCenter(), wl.getWidth(), name, silent);
  };

  /**
   * Set the window level to the preset with the input id.
   *
   * @param {number} id The id of the preset to activate.
   * @param {boolean} silent Flag to launch events with skipGenerate.
   */
  this.setWindowLevelPresetById = function (id, silent) {
    var keys = Object.keys(this.getWindowPresets());
    this.setWindowLevelPreset(keys[id], silent);
  };

  /**
   * Clone the image using all meta data and the original data buffer.
   *
   * @returns {dwv.image.View} A full copy of this {dwv.image.View}.
   */
  this.clone = function () {
    var copy = new dwv.image.View(this.getImage());
    for (var key in windowLuts) {
      copy.addWindowLut(windowLuts[key]);
    }
    copy.setListeners(this.getListeners());
    return copy;
  };

  /**
   * Add an event listener to this class.
   *
   * @param {string} type The event type.
   * @param {object} callback The method associated with the provided
   *   event type, will be called with the fired event.
   */
  this.addEventListener = function (type, callback) {
    listenerHandler.add(type, callback);
  };

  /**
   * Remove an event listener from this class.
   *
   * @param {string} type The event type.
   * @param {object} callback The method associated with the provided
   *   event type.
   */
  this.removeEventListener = function (type, callback) {
    listenerHandler.remove(type, callback);
  };

  /**
   * Fire an event: call all associated listeners with the input event object.
   *
   * @param {object} event The event to fire.
   * @private
   */
  function fireEvent(event) {
    listenerHandler.fireEvent(event);
  }
};

/**
 * Get the image window/level that covers the full data range.
 * Warning: uses the latest set rescale LUT or the default linear one.
 *
 * @returns {object} A min/max window level.
 */
dwv.image.View.prototype.getWindowLevelMinMax = function () {
  var range = this.getImage().getRescaledDataRange();
  var min = range.min;
  var max = range.max;
  var width = max - min;
  // full black / white images, defaults to 1.
  if (width &lt; 1) {
    dwv.logger.warn('Zero or negative window width, defaulting to one.');
    width = 1;
  }
  var center = min + width / 2;
  return new dwv.image.WindowLevel(center, width);
};

/**
 * Set the image window/level to cover the full data range.
 * Warning: uses the latest set rescale LUT or the default linear one.
 */
dwv.image.View.prototype.setWindowLevelMinMax = function () {
  // calculate center and width
  var wl = this.getWindowLevelMinMax();
  // set window level
  this.setWindowLevel(wl.getCenter(), wl.getWidth(), 'minmax');
};

/**
 * Generate display image data to be given to a canvas.
 *
 * @param {Array} array The array to fill in.
 * @param {dwv.math.Index} index Optional index at which to generate,
 *   otherwise generates at current index.
 */
dwv.image.View.prototype.generateImageData = function (array, index) {
  // check index
  if (typeof index === 'undefined') {
    if (!this.getCurrentIndex()) {
      this.setInitialIndex();
    }
    index = this.getCurrentIndex();
  }

  var image = this.getImage();
  var iterator = dwv.image.getSliceIterator(
    image, index, false, this.getOrientation());

  var photoInterpretation = image.getPhotometricInterpretation();
  switch (photoInterpretation) {
  case 'MONOCHROME1':
  case 'MONOCHROME2':
    dwv.image.generateImageDataMonochrome(
      array,
      iterator,
      this.getAlphaFunction(),
      this.getCurrentWindowLut(),
      this.getColourMap()
    );
    break;

  case 'PALETTE COLOR':
    dwv.image.generateImageDataPaletteColor(
      array,
      iterator,
      this.getAlphaFunction(),
      this.getColourMap(),
      image.getMeta().BitsStored === 16
    );
    break;

  case 'RGB':
    dwv.image.generateImageDataRgb(
      array,
      iterator,
      this.getAlphaFunction(),
      this.getCurrentWindowLut()
    );
    break;

  case 'YBR_FULL':
    dwv.image.generateImageDataYbrFull(
      array,
      iterator,
      this.getAlphaFunction()
    );
    break;

  default:
    throw new Error(
      'Unsupported photometric interpretation: ' + photoInterpretation);
  }
};

/**
 * Increment the provided dimension.
 *
 * @param {number} dim The dimension to increment.
 * @param {boolean} silent Do not send event.
 * @returns {boolean} False if not in bounds.
 */
dwv.image.View.prototype.incrementIndex = function (dim, silent) {
  var index = this.getCurrentIndex();
  var values = new Array(index.length());
  values.fill(0);
  if (dim &lt; values.length) {
    values[dim] = 1;
  } else {
    console.warn('Cannot increment given index: ', dim, values.length);
  }
  var incr = new dwv.math.Index(values);
  var newIndex = index.add(incr);
  return this.setCurrentIndex(newIndex, silent);
};

/**
 * Decrement the provided dimension.
 *
 * @param {number} dim The dimension to increment.
 * @param {boolean} silent Do not send event.
 * @returns {boolean} False if not in bounds.
 */
dwv.image.View.prototype.decrementIndex = function (dim, silent) {
  var index = this.getCurrentIndex();
  var values = new Array(index.length());
  values.fill(0);
  if (dim &lt; values.length) {
    values[dim] = -1;
  } else {
    console.warn('Cannot decrement given index: ', dim, values.length);
  }
  var incr = new dwv.math.Index(values);
  var newIndex = index.add(incr);
  return this.setCurrentIndex(newIndex, silent);
};

/**
 * Get the scroll dimension index.
 *
 * @returns {number} The index.
 */
dwv.image.View.prototype.getScrollIndex = function () {
  var index = null;
  var orientation = this.getOrientation();
  if (typeof orientation !== 'undefined') {
    index = orientation.getThirdColMajorDirection();
  } else {
    index = 2;
  }
  return index;
};

/**
 * Decrement the scroll dimension index.
 *
 * @param {boolean} silent Do not send event.
 * @returns {boolean} False if not in bounds.
 */
dwv.image.View.prototype.decrementScrollIndex = function (silent) {
  return this.decrementIndex(this.getScrollIndex(), silent);
};

/**
 * Increment the scroll dimension index.
 *
 * @param {boolean} silent Do not send event.
 * @returns {boolean} False if not in bounds.
 */
dwv.image.View.prototype.incrementScrollIndex = function (silent) {
  return this.incrementIndex(this.getScrollIndex(), silent);
};
</code></pre></article></section><footer class="footer" id="PeOAagUepe"><div class="wrapper"><i>Documentation generated for dwv v0.31.0-rc.0.</i></div></footer></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">DWV doc</a><div class="mobile-nav-links"><div class="navbar-item"><a id="" href="https://github.com/ivmartel/dwv" target="_blank">github</a></div><div class="navbar-item"><a id="" href="https://www.npmjs.com/package/dwv" target="_blank">npm</a></div></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="gMKB9jkVlMTZFjQFvZ078"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-architecture.html">architecture</a></div><div class="sidebar-section-children"><a href="tutorial-conformance.html">conformance</a></div><div class="sidebar-section-children"><a href="tutorial-developing.html">developing</a></div><div class="sidebar-section-children"><a href="tutorial-errors.html">errors</a></div><div class="sidebar-section-children"><a href="tutorial-examples.html">examples</a></div><div class="sidebar-section-children"><a href="tutorial-integrations.html">integrations</a></div><div class="sidebar-section-children"><a href="tutorial-module.html">module</a></div><div class="sidebar-section-children"><a href="tutorial-standards.html">standards</a></div><div class="sidebar-section-children"><a href="tutorial-user-stories.html">user-stories</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="XMnq3KWHu5us0GuiC_tcf"><div>Namespaces</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="dwv.html">dwv</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.html">ctrl</a></div><div class="sidebar-section-children"><a href="dwv.dicom.html">dicom</a></div><div class="sidebar-section-children"><a href="dwv.env.html">env</a></div><div class="sidebar-section-children"><a href="dwv.gui.html">gui</a></div><div class="sidebar-section-children"><a href="dwv.image.html">image</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.html">filter</a></div><div class="sidebar-section-children"><a href="dwv.image.lut.html">lut</a></div><div class="sidebar-section-children"><a href="dwv.io.html">io</a></div><div class="sidebar-section-children"><a href="dwv.math.html">math</a></div><div class="sidebar-section-children"><a href="dwv.test.html">test</a></div><div class="sidebar-section-children"><a href="dwv.tool.html">tool</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw_.html">draw</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter_.html">filter</a></div><div class="sidebar-section-children"><a href="dwv.utils.html">utils</a></div><div class="sidebar-section-children"><a href="dwv.utils.logger.html">logger</a></div><div class="sidebar-section-children"><a href="dwv.utils.logger.console.html">console</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="XB1UeGrgiPqtbCK7EE0_T"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="dwv.App.html#event:keydown">keydown</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:load">load</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadabort">loadabort</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadend">loadend</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loaderror">loaderror</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loaditem">loaditem</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadprogress">loadprogress</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:loadstart">loadstart</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:opacitychange">opacitychange</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:renderend">renderend</a></div><div class="sidebar-section-children"><a href="dwv.App.html#event:renderstart">renderstart</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.LayerGroup.html#event:offsetchange">offsetchange</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.LayerGroup.html#event:zoomchange">zoomchange</a></div><div class="sidebar-section-children"><a href="dwv.image.DeleteSegmentCommand.html#event:masksegmentdelete">masksegmentdelete</a></div><div class="sidebar-section-children"><a href="dwv.image.DeleteSegmentCommand.html#event:masksegmentredraw">masksegmentredraw</a></div><div class="sidebar-section-children"><a href="dwv.image.Image.html#event:imagechange">imagechange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:alphafuncchange">alphafuncchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:colourchange">colourchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:positionchange">positionchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:wlchange">wlchange</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html#event:wlpresetadd">wlpresetadd</a></div><div class="sidebar-section-children"><a href="dwv.tool.ChangeGroupCommand.html#event:drawchange">drawchange</a></div><div class="sidebar-section-children"><a href="dwv.tool.DeleteGroupCommand.html#event:drawdelete">drawdelete</a></div><div class="sidebar-section-children"><a href="dwv.tool.DrawGroupCommand.html#event:drawcreate">drawcreate</a></div><div class="sidebar-section-children"><a href="dwv.tool.MoveGroupCommand.html#event:drawmove">drawmove</a></div><div class="sidebar-section-children"><a href="dwv.tool.RunFilterCommand.html#event:filterrun">filterrun</a></div><div class="sidebar-section-children"><a href="dwv.tool.RunFilterCommand.html#event:filterundo">filterundo</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html#event:redo">redo</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html#event:undo">undo</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html#event:undoadd">undoadd</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="nYE11oplZw5EksiXPDNlq"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="FilePixGenerator.html">FilePixGenerator</a></div><div class="sidebar-section-children"><a href="GradSquarePixGenerator.html">GradSquarePixGenerator</a></div><div class="sidebar-section-children"><a href="MPRPixGenerator.html">MPRPixGenerator</a></div><div class="sidebar-section-children"><a href="dcmb.utils.ListenerHandler.html">ListenerHandler</a></div><div class="sidebar-section-children"><a href="dwv.App.html">App</a></div><div class="sidebar-section-children"><a href="dwv.ModernizrInit-ModernizrProto.html">ModernizrProto</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.DrawController.html">DrawController</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.LoadController.html">LoadController</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.ToolboxController.html">ToolboxController</a></div><div class="sidebar-section-children"><a href="dwv.ctrl.ViewController.html">ViewController</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DataReader.html">DataReader</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DataWriter.html">DataWriter</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DicomElementsWrapper.html">DicomElementsWrapper</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DicomParser.html">DicomParser</a></div><div class="sidebar-section-children"><a href="dwv.dicom.DicomWriter.html">DicomWriter</a></div><div class="sidebar-section-children"><a href="dwv.dicom.Tag.html">Tag</a></div><div class="sidebar-section-children"><a href="dwv.gui.DrawLayer.html">DrawLayer</a></div><div class="sidebar-section-children"><a href="dwv.gui.LayerGroup.html">LayerGroup</a></div><div class="sidebar-section-children"><a href="dwv.gui.Stage.html">Stage</a></div><div class="sidebar-section-children"><a href="dwv.gui.Style.html">Style</a></div><div class="sidebar-section-children"><a href="dwv.gui.ViewLayer.html">ViewLayer</a></div><div class="sidebar-section-children"><a href="dwv.image.AsynchPixelBufferDecoder.html">AsynchPixelBufferDecoder</a></div><div class="sidebar-section-children"><a href="dwv.image.DeleteSegmentCommand.html">DeleteSegmentCommand</a></div><div class="sidebar-section-children"><a href="dwv.image.DicomBufferToView.html">DicomBufferToView</a></div><div class="sidebar-section-children"><a href="dwv.image.Geometry.html">Geometry</a></div><div class="sidebar-section-children"><a href="dwv.image.Image.html">Image</a></div><div class="sidebar-section-children"><a href="dwv.image.ImageFactory.html">ImageFactory</a></div><div class="sidebar-section-children"><a href="dwv.image.MaskFactory.html">MaskFactory</a></div><div class="sidebar-section-children"><a href="dwv.image.MaskSegmentHelper.html">MaskSegmentHelper</a></div><div class="sidebar-section-children"><a href="dwv.image.PixelBufferDecoder.html">PixelBufferDecoder</a></div><div class="sidebar-section-children"><a href="dwv.image.PlaneHelper.html">PlaneHelper</a></div><div class="sidebar-section-children"><a href="dwv.image.RescaleLut.html">RescaleLut</a></div><div class="sidebar-section-children"><a href="dwv.image.RescaleSlopeAndIntercept.html">RescaleSlopeAndIntercept</a></div><div class="sidebar-section-children"><a href="dwv.image.Size.html">Size</a></div><div class="sidebar-section-children"><a href="dwv.image.Spacing.html">Spacing</a></div><div class="sidebar-section-children"><a href="dwv.image.SynchPixelBufferDecoder.html">SynchPixelBufferDecoder</a></div><div class="sidebar-section-children"><a href="dwv.image.View.html">View</a></div><div class="sidebar-section-children"><a href="dwv.image.ViewFactory.html">ViewFactory</a></div><div class="sidebar-section-children"><a href="dwv.image.WindowLevel.html">WindowLevel</a></div><div class="sidebar-section-children"><a href="dwv.image.WindowLut.html">WindowLut</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.Sharpen.html">Sharpen</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.Sobel.html">Sobel</a></div><div class="sidebar-section-children"><a href="dwv.image.filter.Threshold.html">Threshold</a></div><div class="sidebar-section-children"><a href="dwv.io.DicomDataLoader.html">DicomDataLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.FilesLoader.html">FilesLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.JSONTextLoader.html">JSONTextLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.MemoryLoader.html">MemoryLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.MultipartLoader.html">MultipartLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.RawImageLoader.html">RawImageLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.RawVideoLoader.html">RawVideoLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.State.html">State</a></div><div class="sidebar-section-children"><a href="dwv.io.UrlsLoader.html">UrlsLoader</a></div><div class="sidebar-section-children"><a href="dwv.io.ZipLoader.html">ZipLoader</a></div><div class="sidebar-section-children"><a href="dwv.math.BucketQueue.html">BucketQueue</a></div><div class="sidebar-section-children"><a href="dwv.math.Circle.html">Circle</a></div><div class="sidebar-section-children"><a href="dwv.math.Ellipse.html">Ellipse</a></div><div class="sidebar-section-children"><a href="dwv.math.Index.html">Index</a></div><div class="sidebar-section-children"><a href="dwv.math.Line.html">Line</a></div><div class="sidebar-section-children"><a href="dwv.math.Matrix33.html">Matrix33</a></div><div class="sidebar-section-children"><a href="dwv.math.Path.html">Path</a></div><div class="sidebar-section-children"><a href="dwv.math.Point.html">Point</a></div><div class="sidebar-section-children"><a href="dwv.math.Point2D.html">Point2D</a></div><div class="sidebar-section-children"><a href="dwv.math.Point3D.html">Point3D</a></div><div class="sidebar-section-children"><a href="dwv.math.ROI.html">ROI</a></div><div class="sidebar-section-children"><a href="dwv.math.Rectangle.html">Rectangle</a></div><div class="sidebar-section-children"><a href="dwv.math.Scissors.html">Scissors</a></div><div class="sidebar-section-children"><a href="dwv.math.SimpleStats.html">SimpleStats</a></div><div class="sidebar-section-children"><a href="dwv.math.Vector3D.html">Vector3D</a></div><div class="sidebar-section-children"><a href="dwv.tool.ChangeGroupCommand.html">ChangeGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.DeleteGroupCommand.html">DeleteGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Draw.html">Draw</a></div><div class="sidebar-section-children"><a href="dwv.tool.DrawGroupCommand.html">DrawGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Filter.html">Filter</a></div><div class="sidebar-section-children"><a href="dwv.tool.Floodfill.html">Floodfill</a></div><div class="sidebar-section-children"><a href="dwv.tool.Livewire.html">Livewire</a></div><div class="sidebar-section-children"><a href="dwv.tool.MoveGroupCommand.html">MoveGroupCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Opacity.html">Opacity</a></div><div class="sidebar-section-children"><a href="dwv.tool.RunFilterCommand.html">RunFilterCommand</a></div><div class="sidebar-section-children"><a href="dwv.tool.Scroll.html">Scroll</a></div><div class="sidebar-section-children"><a href="dwv.tool.ScrollWheel.html">ScrollWheel</a></div><div class="sidebar-section-children"><a href="dwv.tool.ShapeEditor.html">ShapeEditor</a></div><div class="sidebar-section-children"><a href="dwv.tool.UndoStack.html">UndoStack</a></div><div class="sidebar-section-children"><a href="dwv.tool.WindowLevel.html">WindowLevel</a></div><div class="sidebar-section-children"><a href="dwv.tool.ZoomAndPan.html">ZoomAndPan</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.ArrowFactory.html">ArrowFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.CircleFactory.html">CircleFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.EllipseFactory.html">EllipseFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.FreeHandFactory.html">FreeHandFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.ProtractorFactory.html">ProtractorFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.RectangleFactory.html">RectangleFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.RoiFactory.html">RoiFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.draw.RulerFactory.html">RulerFactory</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter.Sharpen.html">Sharpen</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter.Sobel.html">Sobel</a></div><div class="sidebar-section-children"><a href="dwv.tool.filter.Threshold.html">Threshold</a></div><div class="sidebar-section-children"><a href="dwv.utils.ListenerHandler.html">ListenerHandler</a></div><div class="sidebar-section-children"><a href="dwv.utils.ThreadPool.html">ThreadPool</a></div><div class="sidebar-section-children"><a href="dwv.utils.WorkerTask.html">WorkerTask</a></div><div class="sidebar-section-children"><a href="dwv.utils.WorkerThread.html">WorkerThread</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="gCSpF9Amf-JCfSNz7Y70c"><div>Externals</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="external-FileReader.html">FileReader</a></div><div class="sidebar-section-children"><a href="external-JSZip.html">JSZip</a></div><div class="sidebar-section-children"><a href="external-JpegImage.html">JpegImage</a></div><div class="sidebar-section-children"><a href="external-JpxImage.html">JpxImage</a></div><div class="sidebar-section-children"><a href="external-JpxImage.html">JpxImage</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-Konva.html">Konva</a></div><div class="sidebar-section-children"><a href="external-MagicWand.html">MagicWand</a></div><div class="sidebar-section-children"><a href="external-TextDecoder.html">TextDecoder</a></div><div class="sidebar-section-children"><a href="external-TextEncoder.html">TextEncoder</a></div><div class="sidebar-section-children"><a href="external-Worker.html">Worker</a></div><div class="sidebar-section-children"><a href="external-XMLHttpRequest.html">XMLHttpRequest</a></div><div class="sidebar-section-children"><a href="external-XMLHttpRequest.html">XMLHttpRequest</a></div><div class="sidebar-section-children"><a href="external-i18next.html">i18next</a></div><div class="sidebar-section-children"><a href="external-i18nextBrowserLanguageDetector.html">i18nextBrowserLanguageDetector</a></div><div class="sidebar-section-children"><a href="external-i18nextHttpBackend.html">i18nextHttpBackend</a></div><div class="sidebar-section-children"><a href="external-jpeg.html">jpeg</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="dIx1EF6rW_YdnipjQW6PA"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-tests_dicom.html">tests/dicom</a></div><div class="sidebar-section-children"><a href="module-tests_gui.html">tests/gui</a></div><div class="sidebar-section-children"><a href="module-tests_image.html">tests/image</a></div><div class="sidebar-section-children"><a href="module-tests_io.html">tests/io</a></div><div class="sidebar-section-children"><a href="module-tests_math.html">tests/math</a></div><div class="sidebar-section-children"><a href="module-tests_math.html">tests/math</a></div><div class="sidebar-section-children"><a href="module-tests_state.html">tests/state</a></div><div class="sidebar-section-children"><a href="module-tests_utils.html">tests/utils</a></div><div class="sidebar-section-children"><a href="module-tests_utils.html">tests/utils</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#light-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>